---
title: Linux
layout: post
tags: Linux
categories: ''

---
# Linux

![image-20200620143618758](images\image-20200620143618758.png)

## PART1 . Linux基础 

#### 基本快捷键的使用

（1）Tab，补充命令

不用输入完整的命令，输入命令前几个字母后Tab键，会自动补全命令提示。

（2）移动光标命令

**Ctrl+A：移动光标到开头**

**Ctrl+E：移动光标到结尾**

Ctrl+F：往光标后面移动一个字符

Ctrl+B：往光标前面移动一个字符

（3）剪切字符

Ctrl+K：剪切光标处到行尾的字符

Ctrl+U：剪切光标处到行首的字符

**Ctrl+Y：将剪切的字符进行粘贴**

（4）复制粘贴

Ctrl+Ins：复制

Shift+Ins：粘贴

（5）中断正在运行的命令行

Ctrl+C

（6）退出当前Xshell

Ctrl+D

（7）搜索命令行使用过的历史命令记录

Ctrl+R

![img](https://img2018.cnblogs.com/blog/1486105/201906/1486105-20190607162237391-908991423.png)

（8）获取上一条命令的最后部分，用空格分隔开来的部分

ESC+.

![img](https://img2018.cnblogs.com/blog/1486105/201906/1486105-20190607162514973-1746142012.png)

（9）清屏命令

Ctrl+L

![img](https://img2018.cnblogs.com/blog/1486105/201906/1486105-20190607162600112-49042492.png)

（10）暂停命令

Ctrl+Z

![img](https://img2018.cnblogs.com/blog/1486105/201906/1486105-20190607162736245-1238925794.png)

如上面sleep 40命令执行后一直动不了，光标一直在闪，按Ctrl+Z后就可以重新回到命令行

（11）锁屏

Ctrl+S

（12）解除锁屏

Ctrl+Q

（13） ！+ 命令 执行上一条命令，!! 执行上两条命令



## PART2  硬链接与软链接

硬链接：当原来文件被删除之后，新的链接项仍然存在

软链接：当原来文件被删除后，新的链接项没有内容；和快捷方式相似

```
# 创建硬链接
ln f1 f2
# 创建软链接
ln -s f1 f2
```

## PART3  账号管理

[参考链接]: https://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&mid=2247483895&idx=1&sn=b685934ee0d08b9d01cc0c35ed7fed71&scene=19#wechat_redirect

用户账号的管理工作主要涉及到用户账号的添加、修改和删除。

添加用户账号就是在系统中创建一个新账号，然后为新账号分配用户号、用户组、主目录和登录Shell等资源。

### 1. **添加账号 useradd**

```
useradd 选项 用户名
```

参数说明：

- 选项 :

- - -c comment 指定一段注释性描述。
  - -d 目录 指定用户主目录，如果此目录不存在，则同时使用-m选项，可以创建主目录。
  - -g 用户组 指定用户所属的用户组。
  - -G 用户组，用户组 指定用户所属的附加组。
  - -m　使用者目录如不存在则自动建立。
  - -s Shell文件 指定用户的登录Shell。
  - -u 用户号 指定用户的用户号，如果同时有-o选项，则可以重复使用其他用户的标识号。

- 用户名 :

- - 指定新账号的登录名。

测试：

```
# 此命令创建了一个用户kuangshen，其中-m选项用来为登录名kuangshen产生一个主目录 /home/kuangshen
[root@kuangshen home]# useradd -m kuangshen
```

增加用户账号就是在/etc/passwd文件中为新用户增加一条记录，同时更新其他系统文件如/etc/shadow, /etc/group等。

### 2. **Linux下如何切换用户**

1.切换用户的命令为：su username 【username是你的用户名哦】

2.从普通用户切换到root用户，还可以使用命令：sudo su

3.在终端输入exit或logout或使用快捷方式ctrl+d，可以退回到原来用户，其实ctrl+d也是执行的exit命令

4.在切换用户时，如果想在切换用户之后使用新用户的工作环境，可以在su和username之间加-，例如：【su - root】

$表示普通用户

\#表示超级用户，也就是root用户

### 3. 删除帐号

如果一个用户的账号不再使用，可以从系统中删除。

删除用户账号就是要将/etc/passwd等系统文件中的该用户记录删除，必要时还删除用户的主目录。

删除一个已有的用户账号使用userdel命令，其格式如下：

```
userdel 选项 用户名
```

常用的选项是 **-r**，它的作用是把用户的主目录一起删除。

```
[root@kuangshen home]# userdel -r kuangshen
```

此命令删除用户kuangshen在系统文件中（主要是/etc/passwd, /etc/shadow, /etc/group等）的记录，同时删除用户的主目录。

### 4. 修改帐号

修改用户账号就是根据实际情况更改用户的有关属性，如用户号、主目录、用户组、登录Shell等。

修改已有用户的信息使用usermod命令，其格式如下：

```
usermod 选项 用户名
```

常用的选项包括-c, -d, -m, -g, -G, -s, -u以及-o等，这些选项的意义与useradd命令中的选项一样，可以为用户指定新的资源值。

例如：

```
# usermod -s /bin/ksh -d /home/z –g developer kuangshen
```

此命令将用户kuangshen的登录Shell修改为ksh，主目录改为/home/z，用户组改为developer。

### 5. 用户口令的管理

用户管理的一项重要内容是用户口令的管理。用户账号刚创建时没有口令，但是被系统锁定，无法使用，必须为其指定口令后才可以使用，即使是指定空口令。

指定和修改用户口令的Shell命令是passwd。超级用户可以为自己和其他用户指定口令，普通用户只能用它修改自己的口令。

命令的格式为：

```
passwd 选项 用户名
```

可使用的选项：

- -l 锁定口令，即禁用账号。用于冻结账号
- -u 口令解锁。
- -d 使账号无口令。
- -f 强迫用户下次登录时修改口令。

如果默认用户名，则修改当前用户的口令。

例如，假设当前用户是kuangshen，则下面的命令修改该用户自己的口令：

```
$ passwd
Old password:******
New password:*******
Re-enter new password:*******
```

如果是超级用户，可以用下列形式指定任何用户的口令：

```
# passwd kuangshen
New password:*******
Re-enter new password:*******
```

普通用户修改自己的口令时，passwd命令会先询问原口令，验证后再要求用户输入两遍新口令，如果两次输入的口令一致，则将这个口令指定给用户；而超级用户为用户指定口令时，就不需要知道原口令。

为了系统安全起见，用户应该选择比较复杂的口令，例如最好使用8位长的口令，口令中包含有大写、小写字母和数字，并且应该与姓名、生日等不相同。

为用户指定空口令时，执行下列形式的命令：

```
# passwd -d kuangshen
```

此命令将用户 kuangshen的口令删除，这样用户 kuangshen下一次登录时，系统就不再允许该用户登录了。

passwd 命令还可以用 -l(lock) 选项锁定某一用户，使其不能登录，例如：

```bash
passwd -l kuangshen
```

### 6. 用户组管理

每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理。不同Linux 系统对用户组的规定有所不同，如Linux下的用户属于与它同名的用户组，这个用户组在创建用户时同时创建。

用户组的管理涉及用户组的添加、删除和修改。组的增加、删除和修改实际上就是对/etc/group文件的更新。

**增加**一个新的用户组使用groupadd命令

```bash
groupadd 选项 用户组
```

可以使用的选项有：

- -g GID 指定新用户组的组标识号（GID）。
- -o 一般与-g选项同时使用，表示新用户组的GID可以与系统已有用户组的GID相同。

实例1：

```
# groupadd group1
```

此命令向系统中增加了一个新组group1，新组的组标识号是在当前已有的最大组标识号的基础上加1。

实例2：

```
# groupadd -g 101 group2
```

此命令向系统中增加了一个新组group2，同时指定新组的组标识号是101。

**删除**一个已有的用户组，使用groupdel命令

```
groupdel 用户组
```

例如：

```bash
groupdel group1
```

此命令从系统中删除组group1。

**修改**用户组的属性使用groupmod命令

```
groupmod 选项 用户组
```

常用的选项有：

- -g GID 为用户组指定新的组标识号。
- -o 与-g选项同时使用，用户组的新GID可以与系统已有用户组的GID相同。
- -n新用户组 将用户组的名字改为新名字

```bash
# 此命令将组group2的组标识号修改为102。
groupmod -g 102 group2

# 将组group2的标识号改为10000，组名修改为group3。
groupmod –g 10000 -n group3 group2
```

**切换**组

如果一个用户同时属于多个用户组，那么用户可以在用户组之间切换，以便具有其他用户组的权限。

用户可以在登录后，使用命令newgrp切换到其他用户组，这个命令的参数就是目的用户组。例如：

```
$ newgrp root
```

这条命令将当前用户切换到root用户组，前提条件是root用户组确实是该用户的主组或附加组。

**/etc/passwd文件是用户管理工作涉及的最重要的一个文件。**

Linux系统中的每个用户都在/etc/passwd文件中有一个对应的记录行，它记录了这个用户的一些基本属性。

这个文件对所有用户都是可读的。它的内容类似下面的例子：

```
＃ cat /etc/passwd

root:x:0:0:Superuser:/:
daemon:x:1:1:System daemons:/etc:
bin:x:2:2:Owner of system commands:/bin:
sys:x:3:3:Owner of system files:/usr/sys:
adm:x:4:4:System accounting:/usr/adm:
uucp:x:5:5:UUCP administrator:/usr/lib/uucp:
auth:x:7:21:Authentication administrator:/tcb/files/auth:
cron:x:9:16:Cron daemon:/usr/spool/cron:
listen:x:37:4:Network daemon:/usr/net/nls:
lp:x:71:18:Printer administrator:/usr/spool/lp:
```

从上面的例子我们可以看到，/etc/passwd中一行记录对应着一个用户，每行记录又被冒号(:)分隔为7个字段，其格式和具体含义如下：

```
用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell
```

1）"用户名"是代表用户账号的字符串。

​		通常长度不超过8个字符，并且由大小写字母和/或数字组成。登录名中不能有冒号(:)，因为冒号在这里是分隔符。

​		为了兼容起见，登录名中最好不要包含点字符(.)，并且不使用连字符(-)和加号(+)打头。

2）“口令”一些系统中，存放着加密后的用户口令字。

​		虽然这个字段存放的只是用户口令的加密串，不是明文，但是由于/etc/passwd文件对所有用户都可读，所以这仍是一个安全隐患。		因此，现在许多Linux 系统（如SVR4）都使用了shadow技术，把真正的加密后的用户口令字存放到/etc/shadow文件中，而		在/etc/passwd文件的口令字段中只存放一个特殊的字符，例如“x”或者“*”。

3）“用户标识号”是一个整数，系统内部用它来标识用户。

​		一般情况下它与用户名是一一对应的。如果几个用户名对应的用户标识号是一样的，系统内部将把它们视为同一个用户，但是它们可以有不同的口令、不同的主目录以及不同的登录Shell等。

​		通常用户标识号的取值范围是0～65 535。0是超级用户root的标识号，1～99由系统保留，作为管理账号，普通用户的标识号从100开始。在Linux系统中，这个界限是500。

4）“组标识号”字段记录的是用户所属的用户组。

​		它对应着/etc/group文件中的一条记录。

5)“注释性描述”字段记录着用户的一些个人情况。

​		例如用户的真实姓名、电话、地址等，这个字段并没有什么实际的用途。在不同的Linux 系统中，这个字段的格式并没有统一。在许多Linux系统中，这个字段存放的是一段任意的注释性描述文字，用作finger命令的输出。

6)“主目录”，也就是用户的起始工作目录。

​		它是用户在登录到系统之后所处的目录。在大多数系统中，各用户的主目录都被组织在同一个特定的目录下，而用户主目录的名称就是该用户的登录名。各用户对自己的主目录有读、写、执行（搜索）权限，其他用户对此目录的访问权限则根据具体情况设置。

7)用户登录后，要启动一个进程，负责将用户的操作传给内核，这个进程是用户登录到系统后运行的命令解释器或某个特定的程序，即Shell。

​		Shell是用户与Linux系统之间的接口。Linux的Shell有许多种，每种都有不同的特点。常用的有sh(Bourne Shell), csh(C Shell), ksh(Korn Shell), tcsh(TENEX/TOPS-20 type C Shell), bash(Bourne Again Shell)等。

​		系统管理员可以根据系统情况和用户习惯为用户指定某个Shell。如果不指定Shell，那么系统使用sh为默认的登录Shell，即这个字段的值为/bin/sh。

​		用户的登录Shell也可以指定为某个特定的程序（此程序不是一个命令解释器）。

​		利用这一特点，我们可以限制用户只能运行指定的应用程序，在该应用程序运行结束后，用户就自动退出了系统。有些Linux 系统要求只有那些在系统中登记了的程序才能出现在这个字段中。

8)系统中有一类用户称为伪用户（pseudo users）。

​		这些用户在/etc/passwd文件中也占有一条记录，但是不能登录，因为它们的登录Shell为空。它们的存在主要是方便系统管理，满足相应的系统进程对文件属主的要求。

常见的伪用户如下所示：

```
伪 用 户 含 义
bin 拥有可执行的用户命令文件
sys 拥有系统文件
adm 拥有帐户文件
uucp UUCP使用
lp lp或lpd子系统使用
nobody NFS使用
```

> /etc/shadow

**1、除了上面列出的伪用户外，还有许多标准的伪用户，例如：audit, cron, mail, usenet等，它们也都各自为相关的进程和文件所需要。**

由于/etc/passwd文件是所有用户都可读的，如果用户的密码太简单或规律比较明显的话，一台普通的计算机就能够很容易地将它破解，因此对安全性要求较高的Linux系统都把加密后的口令字分离出来，单独存放在一个文件中，这个文件是/etc/shadow文件。有超级用户才拥有该文件读权限，这就保证了用户密码的安全性。

**2、/etc/shadow中的记录行与/etc/passwd中的一一对应，它由pwconv命令根据/etc/passwd中的数据自动产生**

它的文件格式与/etc/passwd类似，由若干个字段组成，字段之间用":"隔开。这些字段是：

```
登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志
```

1. "登录名"是与/etc/passwd文件中的登录名相一致的用户账号
2. "口令"字段存放的是加密后的用户口令字，长度为13个字符。如果为空，则对应用户没有口令，登录时不需要口令；如果含有不属于集合 { ./0-9A-Za-z }中的字符，则对应的用户不能登录。
3. "最后一次修改时间"表示的是从某个时刻起，到用户最后一次修改口令时的天数。时间起点对不同的系统可能不一样。例如在SCO Linux 中，这个时间起点是1970年1月1日。
4. "最小时间间隔"指的是两次修改口令之间所需的最小天数。
5. "最大时间间隔"指的是口令保持有效的最大天数。
6. "警告时间"字段表示的是从系统开始警告用户到用户密码正式失效之间的天数。
7. "不活动时间"表示的是用户没有登录活动但账号仍能保持有效的最大天数。
8. "失效时间"字段给出的是一个绝对的天数，如果使用了这个字段，那么就给出相应账号的生存期。期满后，该账号就不再是一个合法的账号，也就不能再用来登录了。

> /etc/group

用户组的所有信息都存放在/etc/group文件中。

将用户分组是Linux 系统中对用户进行管理及控制访问权限的一种手段。

每个用户都属于某个用户组；一个组中可以有多个用户，一个用户也可以属于不同的组。

当一个用户同时是多个组中的成员时，在/etc/passwd文件中记录的是用户所属的主组，也就是登录时所属的默认组，而其他组称为附加组。

用户要访问属于附加组的文件时，必须首先使用newgrp命令使自己成为所要访问的组中的成员。

用户组的所有信息都存放在/etc/group文件中。此文件的格式也类似于/etc/passwd文件，由冒号(:)隔开若干个字段，这些字段有：

```
组名:口令:组标识号:组内用户列表
```

1. "组名"是用户组的名称，由字母或数字构成。与/etc/passwd中的登录名一样，组名不应重复。
2. "口令"字段存放的是用户组加密后的口令字。一般Linux 系统的用户组都没有口令，即这个字段一般为空，或者是*。
3. "组标识号"与用户标识号类似，也是一个整数，被系统内部用来标识组。
4. "组内用户列表"是属于这个组的所有用户的列表/b]，不同用户之间用逗号(,)分隔。这个用户组可能是用户的主组，也可能是附加组。

## PART4 进程管理

Linux 中一切皆文件！

1. 在linux中，每个程序都有自己的进程，每一个进程都有一个id号
2. 每一个进程，都会有一个父进程
3. 进程有两种存在方式：前台  后台运行
4. 一般的服务都是后台运行的，基本的程序都是前台运行的

###  1. **查看**进程

查看当前系统中正在执行的各种进程的信息！

```bash
ps
-a    显示当前终端运行的所有进程信息
-u 	  以用户的信息显示进程
-x    显示后台参数

# 查看所有进程
ps -aux |grep mysql
```

### 2. **杀死**进程

```bash
# 强制杀死进程
kill -9 进程的id   
```



## PART5 开发环境搭建

---

### 1.  Linux docker 安装教程

```bash
sudo apt-get update
sudo apt-get install -y docker.io
```

安装docker-compose

```bash
sudo curl -L https://github.com/docker/compose/releases/download/1.20.0/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose

chmod +x /usr/local/bin/docker-compose

docker-compose version
```

安装vim

```bash
sudo apt install vim
```

配置加速器（阿里云加速器）

```bash
sudo mkdir -p /etc/docker

sudo tee /etc/docker/daemon.json <<-'EOF'

{ 

 "registry-mirrors": ["https://lnwifaa6.mirror.aliyuncs.com"] 

}

EOF

sudo systemctl daemon-reload 

sudo systemctl restart docker
```

切换为root

```
sudo -i
```

退出root

```
exit
```

---

### 2. Linux安装python

卸载python只需一条语句就可以实现

```bash
sudo apt-get remove python
```

**ubuntu下安装python3**

```
sudo apt-get install python3
```

但这样只安装了python3.4

要想使用python3.5，则必须升级python3.4

```
sudo add-apt-repository ppa:fkrull/deadsnakes
sudo apt-get update
sudo apt-get install python3.5
```

使用以上三行命令便可升级python3.4到python3.5

启动时要输入python3.5

输入python时启动的是python2.7

输入python3时启动的是python3.4

输入python3.5时启动的才是python3.5

**安装pip（切换到root下）**

```
wget https://bootstrap.pypa.io/get-pip.py  
python get-pip.py 
```

```
apt-get install python3-pip
```

**pycharm快捷方式创建**

https://www.cnblogs.com/Jimc/p/10303896.html

---

### 3. Linux创建python环境

https://www.cnblogs.com/HeZhengfa/p/10486841.html

建议使用如下操作：

安装 pip

```
sudo apt install python3-pip
```

使用python3创建环境

```
python3 -m venv venv
```

torch安装

```
pip install torch==1.6.0+cpu torchvision==0.7.0+cpu -f https://download.pytorch.org/whl/torch_stable.html
```

---

升级为高版本的python

**１)** 首先更新软件包列表并安装必备组件：

```
sudo apt update

sudo apt install software-properties-common
```

**2)**接下来，将Deadsnakes PPA添加到您的来源列表中：

```
sudo add-apt-repository ppa:deadsnakes/ppa
```

**3)**库添加完成后，请使用以下命令安装Python 3.7：

```
sudo apt install python3.7
```

**４)**至此，Python 3.7已安装在您的Ubuntu系统上，可以使用了。 您可以通过键入以下内容进行验证：

```
python3.7 --version
```

*输出：Python 3.7.5*

**５)**将Python 3.6和Python 3.7添加到更新替代项

```
sudo update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.6 1

sudo update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.7 2
```

**6)**更新Python 3以指向Python 3.7

默认情况下，Python 3.6指向Python3。这意味着当我们运行python3时，它将作为python3.6执行，但我们希望将其作为python3.7执行。

输入以下命令以配置python3：

```
sudo update-alternatives --config python3
```

![img](https:////upload-images.jianshu.io/upload_images/14618620-8bb93b96f266b8c8.png?imageMogr2/auto-orient/strip|imageView2/2/w/786/format/webp)

选择python 3.7, 序号2

您应该获得以上输出。 现在键入2并按Enter键以使用Python 3.7。 请记住，选择号可能会有所不同，因此请选择适用于Python 3.7的选择号。

**７)**测试python版本

最后输入以下命令测试当前版本的python：

```
python3 -V
```

输出应该为 Python 3.7.5



作者：Judy_cf13
链接：https://www.jianshu.com/p/b8f11c04921a
来源：简书
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

不建议以下操作：

第一步 安装 virtualenv

```
sudo apt install virtualenv
```

第二步 创建虚拟环境文件夹（venv为文件夹名）

```
virtualenv venv --python=python3
```

第三步 激活环境

```
source venv/bin/activate
```

第四步 安装python包

```
pip install -r requirements.txt 
```

---

python源码安装教程

第一步 安装gcc编译工具

```
yum -y install gcc
```

第二步 安装依赖项

```
yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel
```

第三步 下载源码包

```
地址 https://www.python.org/downloads/source/
下载 wget https://www.python.org/ftp/python/3.7.4/Python-3.7.4.tgz
解压 tar -xcvf Python-3.7.4.tgz
```

第四步 建立空文件夹，进入文件夹进行配置

```
mkdir /usr/local/python3
chmod 777 /usr/local/python3    保证文件夹可读可写
```

```
cd Python-3.7.4
./configure --prefix=/usr/local/python3
./configure --with-ssl=/usr/local/openssl  #这个地方需要填写ssl的路径
make && make install          编译安装
```

如果有坑，请看这个https://www.cnblogs.com/mlgjb/p/7976561.html

```
坑1  首先保证openssl版本符合要求，不符合重装；

坑2 符合要求，先编译python，后修改配置参数。

在编译python文件后，才会在编译的文件夹产生Module/Setup文件，进去修改，然后再编译才行；

这个地方需要符合要求的ssl
```

第五步 建立软链接

```
ln -s /usr/local/python3/bin/python3.7 /usr/bin/python3
ln -s /usr/local/python3/bin/pip3.7 /usr/bin/pip3
```

### 4. Linux - ubuntu换源

https://blog.csdn.net/weixin_40289171/article/details/88180549?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.channel_param&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.channel_param

1.备份原来的源文件

```
cd /etc/apt/
```

输入命令

```
sudo cp sources.list sources.list.bak
```

就是将sources.list被分到sources.list.bak

2.替换源

```
sudo gedit sources.list
sudo vim sources.list
```

删除原来的所有内容，替换成清华或者阿里的源。

```
# 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse

# 预发布软件源，不建议启用
# deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse
```

> 这是清华的源 https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/

```
deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse

```

> 这是阿里的源 https://developer.aliyun.com/mirror/ubuntu?spm=a2c6h.13651102.0.0.3e221b11Z6DCm6

3.更新源和软件

```
sudo apt-get update      #更新源
sudo apt-get upgrade     #更新软件
```

打完收工！

### **5. pycharm安装**

1.官网下载安装包，进行安装

图表创建，直接打开pycharm tools create entry

2.命令安装如下：

```
sudo snap install pycharm-community --classic
sudo snap install pycharm-professional --classic
```

可通过终端直接启动pycharm

### 6. Linux安装中文输入法

1. 设置中文界面

在终端下执行

```linux
sudo apt-get install language-pack-zh-han*
```

然后去语言中心设置中文，并全局使用即可。

【遇到依赖项不能满足，sudo apt-get install -f 或者 apt automove】

在终端输入：ibus-setup，回车，会弹出Ibus首选项对话框。点击“选择输入法”，然后选择一种输入法，点击右侧的“添加”。

![img](https://img-blog.csdn.net/20150707092644664?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

2.在系统界面右上角点击设置，选择“系统设置”，然后在弹出的对话框选择“文本输入设置”，（也可以在右上角的输入法位置点击，选择弹出列表最下方的“文本输入设置”）。【在加号里面选择汉语，输入源为汉语就行了】

![img](https://img-blog.csdn.net/20150707092726296?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

3.在弹出的对话框中，点击最下角的“+”，弹出“选择一个输入源”对话框，输入在第一步中看到的某种想要可以切换的输入法的名字，如“intelligent pinyin”(这种输入法在第一步的我的系统中是可以看到的，即已安装)，然后点击“添加”即可。之后就可以使用“super+空格”切换到这种输入法了。

![img](https://img-blog.csdn.net/20150707092739388?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

### 7.安装vscode

依次输入如下命令

1、sudo add-apt-repository ppa:ubuntu-desktop/ubuntu-make
2、sudo apt-get update
3、sudo apt-get install ubuntu-make
4、umake ide visual-studio-code

外面的话： 在windows下面激活环境

![image-20201120152848438](images\image-20201120152848438.png)



### 8.安装mysql

https://www.cnblogs.com/zhou0000/p/8509100.html

1.检查Linux系统中是否已经安装了MySQL，命令为：

```
　sudo service mysql start
```

　若提示mysql：unrecognized service则说明系统中没有MySQL，需要继续安装。

2.Ubuntu Linux 安装配置MySQL：在Ubuntu上安装MySQL，最简单的方式是在线安装

```
　命令为：sudo apt-get install mysql-server    #安装MySQL服务端，核心程序

　　　　　　sudo apt-get install mysql-client　  #安装MySQL客户端
　　　　　　
　　　　　　sudo apt-get install libmysqlclient-dev
　　　　　　         
           sudo apt install net-tools   #Ubuntu 安装 net-tools，执行：
```

　　在安装过程中会提示输入确认YES，设置root用户密码（之后可以修改）等

　　安装结束后，验证是否安装成功命令：

```
sudo netstat -tap | grep mysql
```

3.安装成功后，可以根据自己的需求，用个gedit修改MySQL的配置文件（my.cnf）,命令为：

```
　　sudo gedit /etc/mysql/my.cnf
```

至此，Linux中MySQL已经安装，配置完成。

**卸载**

首先 **sudo service mysql stop**

```html
sudo rm /var/lib/mysql/ -R

sudo rm /etc/mysql/ -R


sudo apt-get autoremove mysql* --purge

sudo apt-get remove apparmor


sudo apt-get install mysql-server mysql-common
```



### 9.安装git 

https://blog.csdn.net/Bingsman/article/details/49121139?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.add_param_isCf&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.add_param_isCf

1.安装git

```
sudo apt install git
```

2.配置用户

```
git config --global user.name "HonorZheng"

git config --global user.email "zhengkan1993@gmail.com"
```

3.git备份上传 [首先在github建立app03仓库]

```
git init

git add . #// 如果是。表示上传全部目录下的文件，可以是某个文件，添加到暂存区

git commit -m 'version 1.0'

git remote add origin https://github.com/CarmanZheng/app03.git

git push origin master -f
```

4.通过命令git status来查看文件状态是否还有文件未提交，

通过命令git diff readme.txt 查看readme.txt文件到底改了什么内容（但是对于二进制文件（例如：视频，音乐）只能查出修改大小，不能查看修改内容）

```
git status           //查看文件状态是否已经全部上传
git diff readme.txt   //查看文件修改了什么内容 
```

5.**版本回退**，首先查看log，通过git log查看最近的修改历史记录（git log –pretty=oneline 把log打印成一条线），然后通过git reflog查看版本号

```
git log                    //查看修改日志
git log --pretty=oneline    //查看修改日志并且日志在一行
git reflog                 //查看提交的各个版本
git reset  --hard 版本号     //回退固定版本
git reset  --hard HEAD^     //回退到上一个版本
git reset  --hard HEAD^^    //回退到上上一个版本
git reset  --hard HEAD~50   //回退到前50个版本
```

### 10.安装google

1. 对于64位版本可以使用如下链接下载：

  ```
  wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
  ```

  

或者直接从百度自行搜索，但是要和你的Ubuntu版本对应（32位还是64位）

2.安装deb包

```
sudo dpkg -i google-chrome-stable_current_amd64.deb
```

3.要是依赖出现问题（修复依赖关系）

```
sudo apt-get -f install
```

### 11.安装conda

```linux
# 第一步下载
# miniconda安装
# wget -c https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/Miniconda3-py37_4.8.2-Linux-x86_64.sh
# 地址源 https://repo.anaconda.com/miniconda/

# 第二步安装
bash Miniconda3-py37_4.8.2-Linux-x86_64.sh  # uname -a
# 按enter--三下空格--输入yes--按enter--输入yes
source ~/.bashrc
# 激活配置

# 第三步：配置镜像
# 配置镜像(安装一次，镜像也只配置一次，注意不要复制错误！！！)
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/bioconda
conda config --set show_channel_urls yes
# 执行完上述命令后，会生成~/.condarc

# 第四步：创建小环境并安装软件
# 创建名为rna的软件安装环境，同时安装python=3.7版本的软件
conda create -n rna python=3.7
# 出现三个done

# 查看当前conda环境
# 可以看到成功建立的rna
conda info --envs

# 激活/进入conda的rna环境，避免安装软件时安装到大环境
source activate rna
# 小环境创建成功，可以随便安装软件到小环境里啦

# 尝试
# 安装 sra-tools软件
conda search sra-tools  
conda install -y sra-tools  # done正确安装，且能调出软件help
......
source deactivate # 退出当前环境
```

### 12.安装jupyter notebook



## PART6 必须记下来的错误解决方案

### 1. Ubuntu下version `GLIBC_2.27‘ not found错误

```
https://blog.csdn.net/qq_39503880/article/details/110277422?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-3.control&dist_request_id=1328602.9662.16149081744608435&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-3.control
```

镜像源

```
https://mirrors.tuna.tsinghua.edu.cn/gnu/libc/
```

### 2.虚拟机网络解决方案

需要修改 虚拟网络编辑器 ，修改DNS服务器IP的方法，与主机中dns项一致

![image-20210306091503319](D:\04_Tianchi\Tianchi_task\HonorZheng.github.io\_posts\images\image-20210306091503319.png)

![image-20210306091432197](D:\04_Tianchi\Tianchi_task\HonorZheng.github.io\_posts\images\image-20210306091432197.png)

ipconfig /all

https://blog.csdn.net/qq_36393978/article/details/106472278?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&dist_request_id=&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control

### 3.虚拟机端口映射

这部分很关键，用于部署虚拟机上的软件与外部通信

![image-20210306144633842](D:\04_Tianchi\Tianchi_task\HonorZheng.github.io\_posts\images\image-20210306144633842.png)

其中192.168.5.128是虚拟机在主机构建的局域网中的ip地址，开放5000端口供局域网内访问；该ip可以通过虚拟机上的ifconfig查询；

同样，在主机上有主机的ip地址，可以通过ipconfig（windows）或者ifconfig（linux）查询，这是一个公网ip地址，开放的端口为10000，通过访问

```
 主机的ip:10000
```

外网就可以通过访问主机端口，进而访问部署在虚拟机上的web项目啦 ！

### 4.查看虚拟机主机IP

```linux
curl icanhazip.com
curl ident.me
curl ipecho.net/plain
curl whatismyip.akamai.com
curl myip.dnsomatic.com
```

随便curl一下！

### 5.VMware Host SMBus controller not enabled

参考：https://blog.csdn.net/qq_39885372/article/details/104374243

```
1. 切换到root账户
2. cd /etc/modprobe.d/
3. vim blacklist.conf 
4. 在最后一行加入 blacklist i2c_piix4
5. update-initramfs -u -k all     # 重新引导生成文件 
6. reboot
```



