---
title: Modbus通信
layout: post
tags: 网络通信
categories: ''
---

## 一、简述

   **Modbus**是一种串行[通信协议](https://baike.baidu.com/item/通信协议)，是Modicon公司（现在的[施耐德电气](https://baike.baidu.com/item/施耐德电气) Schneider Electric）于1979年为使用[可编程逻辑控制器](https://baike.baidu.com/item/可编程逻辑控制器)（PLC）通信而发表。Modbus已经成为工业领域通信协议的业界标准（De facto），并且现在是工业[电子设备](https://baike.baidu.com/item/电子设备/4393826)之间常用的连接方式。

```
  信息 
    |-- 指令信息
    |
    |---数据信息 
            |---数值信息 
             |	     |--- 整数
             |	     |--- 实数
             |
             |---非数值信息
                |---字符数据
                |---逻辑数据
                |---中英文数据
                |---声音图像数据
```

## 二、Modbus应用协议

​	modbus是一种 简单客户机/服务器应用协议（CS架构），Master/Slave模式，一主多从或多主多从

* 客户机能够向服务器发送请求

* 服务器分析请求、处理请求、向客户机做出应答

| 寄存器类型                  | 说明     | 寄存器地址   | PLC IO        | 常用功能码 | 举例              |
| --------------------------- | -------- | ------------ | ------------- | ---------- | ----------------- |
| 线圈（coil）                | 可读可写 | 00001- 09999 | DO数字量输出  | 01 05 0F   | 电磁阀 二极管     |
| 离散输入 （Discrete Input） | 只读     | 10001-19999  | DI 数字量输入 | 02         | 拨码开关 接近开关 |
| 保持寄存器 Holding Register | 可读可写 | 30001-39999  | AO 模拟量输出 | 04         | 电压值  PID参数   |
| 输入寄存器 Input Register   | 只读     | 40001-49999  | AI 模拟量输入 | 03 06 0F   | 温度传感器        |



Modbus分类

RS232   点对点连接 全双工   一根TX线，一根RX线

RS485  总线型连接  半双工	双绞线

RS422  总线型连接	全双工		

Ethernet - 灵活拓扑  全双工



Modbus常见的三种模式

Modbus RTU : 二进制数据       自行填写CRC

Modbus ASCII ：ASCII 数据	自行填写CRC

Modbus TCP : 二进制数据 	TCP协议栈负责CRC，丢包由TCP协议栈处理

